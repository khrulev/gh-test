(this["webpackJsonpreact-js-buy"]=this["webpackJsonpreact-js-buy"]||[]).push([[0],{38:function(e,t,n){e.exports=n(52)},50:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(30),c=n.n(r),i=n(15),o=n(11),u=n(12),l=n(7),m=n(14),h=n(13),p=n(18),d=n(25),C=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement("select",{className:"Product__option",name:this.props.option.name,key:this.props.option.name,onChange:this.props.handleOptionChange},this.props.option.values.map((function(t){return s.a.createElement("option",{value:t,key:"".concat(e.props.option.name,"-").concat(t)},"".concat(t))})))}}]),n}(a.Component),k=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={selectedOptions:{}},a.handleOptionChange=a.handleOptionChange.bind(Object(l.a)(a)),a.handleQuantityChange=a.handleQuantityChange.bind(Object(l.a)(a)),a.findImage=a.findImage.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"componentWillMount",value:function(){var e=this;this.props.product.options.forEach((function(t){e.setState((function(e){return{selectedOptions:Object(d.a)(Object(d.a)({},e.selectedOptions),{},Object(p.a)({},t.name,t.values[0]))}}))}))}},{key:"findImage",value:function(e,t){var n=e[0];return(e.filter((function(e){return e.variant_ids.includes(t)}))[0]||n).src}},{key:"handleOptionChange",value:function(e){var t=e.target,n=this.state.selectedOptions;n[t.name]=t.value;var a=this.props.product.variants.edges.find((function(e){return e.node.selectedOptions.every((function(e){return n[e.name]===e.value}))})).node;this.setState({selectedVariant:a,selectedVariantImage:a.image.src})}},{key:"handleQuantityChange",value:function(e){this.setState({selectedVariantQuantity:e.target.value})}},{key:"addVariantToCart_Test",value:function(e,t){console.log("postMessage","setItemToCart_AfterQuiz"),window.parent.postMessage({setItemToCart_AfterQuiz:[1,2,3,4,5,6]},"*")}},{key:"render",value:function(){var e=this,t=this.state.selectedVariantImage||this.props.product.images.edges[0].node.src,n=this.state.selectedVariant||this.props.product.variants.edges[0].node,a=this.state.selectedVariantQuantity||1,r=this.props.product.options.map((function(t){return s.a.createElement(C,{handleOptionChange:e.handleOptionChange,key:t.id.toString(),option:t})}));return s.a.createElement("div",{className:"Product"},this.props.product.images.edges.length?s.a.createElement("img",{src:t,alt:"".concat(this.props.product.title," product shot")}):null,s.a.createElement("h5",{className:"Product__title"},this.props.product.title),s.a.createElement("span",{className:"Product__price"},"$",n.price),r,s.a.createElement("label",{className:"Product__option"},"Quantity",s.a.createElement("input",{min:"1",type:"number",defaultValue:a,onChange:this.handleQuantityChange})),s.a.createElement("button",{className:"Product__buy button",onClick:function(){return e.props.addVariantToCart(n.id,a)}},"Add to Cart"),s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement("button",{className:"Product__buy button",onClick:function(){return e.addVariantToCart_Test(n.id,a)}},"Click ME")))}}]),n}(a.Component),f=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).decrementQuantity=a.decrementQuantity.bind(Object(l.a)(a)),a.incrementQuantity=a.incrementQuantity.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"decrementQuantity",value:function(e){this.props.updateLineItemInCart(e,this.props.line_item.quantity-1)}},{key:"incrementQuantity",value:function(e){this.props.updateLineItemInCart(e,this.props.line_item.quantity+1)}},{key:"render",value:function(){var e=this;return s.a.createElement("li",{className:"Line-item"},s.a.createElement("div",{className:"Line-item__img"},this.props.line_item.variant.image?s.a.createElement("img",{src:this.props.line_item.variant.image.src,alt:"".concat(this.props.line_item.title," product shot")}):null),s.a.createElement("div",{className:"Line-item__content"},s.a.createElement("div",{className:"Line-item__content-row"},s.a.createElement("div",{className:"Line-item__variant-title"},this.props.line_item.variant.title),s.a.createElement("span",{className:"Line-item__title"},this.props.line_item.title)),s.a.createElement("div",{className:"Line-item__content-row"},s.a.createElement("div",{className:"Line-item__quantity-container"},s.a.createElement("button",{className:"Line-item__quantity-update",onClick:function(){return e.decrementQuantity(e.props.line_item.id)}},"-"),s.a.createElement("span",{className:"Line-item__quantity"},this.props.line_item.quantity),s.a.createElement("button",{className:"Line-item__quantity-update",onClick:function(){return e.incrementQuantity(e.props.line_item.id)}},"+")),s.a.createElement("span",{className:"Line-item__price"},"$ ",(this.props.line_item.quantity*this.props.line_item.variant.price).toFixed(2)),s.a.createElement("button",{className:"Line-item__remove",onClick:function(){return e.props.removeLineItemInCart(e.props.line_item.id)}},"\xd7"))))}}]),n}(a.Component),v=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).openCheckout=a.openCheckout.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"openCheckout",value:function(){window.open(this.props.checkout.webUrl)}},{key:"render",value:function(){var e=this,t=this.props.checkout.lineItems.edges.map((function(t){return s.a.createElement(f,{removeLineItemInCart:e.props.removeLineItemInCart,updateLineItemInCart:e.props.updateLineItemInCart,key:t.node.id.toString(),line_item:t.node})}));return s.a.createElement("div",{className:"Cart ".concat(this.props.isCartOpen?"Cart--open":"")},s.a.createElement("header",{className:"Cart__header"},s.a.createElement("h2",null,"Cart"),s.a.createElement("button",{onClick:this.props.handleCartClose,className:"Cart__close"},"\xd7")),s.a.createElement("ul",{className:"Cart__line-items"},t),s.a.createElement("footer",{className:"Cart__footer"},s.a.createElement("div",{className:"Cart-info clearfix"},s.a.createElement("div",{className:"Cart-info__total Cart-info__small"},"Subtotal"),s.a.createElement("div",{className:"Cart-info__pricing"},s.a.createElement("span",{className:"pricing"},"$ ",this.props.checkout.subtotalPrice))),s.a.createElement("div",{className:"Cart-info clearfix"},s.a.createElement("div",{className:"Cart-info__total Cart-info__small"},"Taxes"),s.a.createElement("div",{className:"Cart-info__pricing"},s.a.createElement("span",{className:"pricing"},"$ ",this.props.checkout.totalTax))),s.a.createElement("div",{className:"Cart-info clearfix"},s.a.createElement("div",{className:"Cart-info__total Cart-info__small"},"Total"),s.a.createElement("div",{className:"Cart-info__pricing"},s.a.createElement("span",{className:"pricing"},"$ ",this.props.checkout.totalPrice))),s.a.createElement("button",{className:"Cart__checkout button",onClick:this.openCheckout},"Checkout")))}}]),n}(a.Component),b=n(53),g=n(22),_=n(16),E=n.n(_);function I(){var e=Object(i.a)(["\n  mutation customerAccessTokenCreate($input: CustomerAccessTokenCreateInput!) {\n    customerAccessTokenCreate(input: $input) {\n      userErrors {\n        field\n        message\n      }\n      customerAccessToken {\n        accessToken\n        expiresAt\n      }\n    }\n  }\n"]);return I=function(){return e},e}function O(){var e=Object(i.a)(["\n  mutation customerCreate($input: CustomerCreateInput!) {\n    customerCreate(input: $input) {\n      userErrors {\n        field\n        message\n      }\n      customer {\n        id\n      }\n    }\n  }\n"]);return O=function(){return e},e}var A=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={email:"",password:"",nonFieldErrorMessage:null,emailErrorMessage:null,passwordErrorMessage:null},a.handleInputChange=a.handleInputChange.bind(Object(l.a)(a)),a.createCustomerAccount=a.createCustomerAccount.bind(Object(l.a)(a)),a.resetErrorMessages=a.resetErrorMessages.bind(Object(l.a)(a)),a.resetInputFields=a.resetInputFields.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(p.a)({},a,n))}},{key:"resetErrorMessages",value:function(){this.setState({nonFieldErrorMessage:null,emailErrorMessage:null,passwordErrorMessage:null})}},{key:"resetInputFields",value:function(){this.setState({email:"",password:""})}},{key:"handleSubmit",value:function(e,t){this.resetErrorMessages(),this.props.newCustomer?this.createCustomerAccount(e,t):this.loginCustomerAccount(e,t)}},{key:"createCustomerAccount",value:function(e,t){var n=this,a={email:e,password:t};this.props.customerCreate({variables:{input:a}}).then((function(e){e.data.customerCreate.customer?(n.props.closeCustomerAuth(),n.props.showAccountVerificationMessage()):e.data.customerCreate.userErrors.forEach(function(e){e.field?this.setState(Object(p.a)({},e.field+"ErrorMessage",e.message)):this.setState({nonFieldErrorMessage:e.message})}.bind(n))}))}},{key:"loginCustomerAccount",value:function(e,t){var n=this,a={email:e,password:t};this.props.customerAccessTokenCreate({variables:{input:a}}).then((function(e){e.data.customerAccessTokenCreate.customerAccessToken?n.props.associateCustomerCheckout(e.data.customerAccessTokenCreate.customerAccessToken.accessToken):e.data.customerAccessTokenCreate.userErrors.forEach(function(e){null!=e.field?this.setState(Object(p.a)({},e.field+"ErrorMessage",e.message)):this.setState({nonFieldErrorMessage:e.message})}.bind(n))}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"CustomerAuth ".concat(this.props.isCustomerAuthOpen?"CustomerAuth--open":"")},s.a.createElement("button",{onClick:function(){e.props.closeCustomerAuth(),e.resetErrorMessages(),e.resetInputFields()},className:"CustomerAuth__close"},"\xd7"),s.a.createElement("div",{className:"CustomerAuth__body"},s.a.createElement("h2",{className:"CustomerAuth__heading"},this.props.newCustomer?"Create your Account":"Log in to your account"),this.state.nonFieldErrorMessage&&s.a.createElement("div",{className:"error"},this.state.nonFieldErrorMessage),s.a.createElement("label",{className:"CustomerAuth__credential"},s.a.createElement("input",{className:"CustomerAuth__input",type:"email",placeholder:"Email",name:"email",value:this.state.email,onChange:this.handleInputChange}),this.state.emailErrorMessage&&s.a.createElement("div",{className:"error"},this.state.emailErrorMessage)),s.a.createElement("label",{className:"CustomerAuth__credential"},s.a.createElement("input",{className:"CustomerAuth__input",type:"password",placeholder:"Password",name:"password",value:this.state.password,onChange:this.handleInputChange}),this.state.passwordErrorMessage&&s.a.createElement("div",{className:"error"},this.state.passwordErrorMessage)),s.a.createElement("button",{className:"CustomerAuth__submit button",type:"submit",onClick:function(){return e.handleSubmit(e.state.email,e.state.password)}},this.props.newCustomer?"Create Account":"Log in")))}}]),n}(a.Component),y=E()(O()),j=E()(I()),N=Object(g.flowRight)(Object(b.a)(y,{name:"customerCreate"}),Object(b.a)(j,{name:"customerAccessTokenCreate"}))(A);function w(){var e=Object(i.a)(["\n  mutation checkoutCustomerAssociate($checkoutId: ID!, $customerAccessToken: String!) {\n    checkoutCustomerAssociate(checkoutId: $checkoutId, customerAccessToken: $customerAccessToken) {\n      userErrors {\n        field\n        message\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function L(){var e=Object(i.a)(["\n  mutation checkoutLineItemsRemove ($checkoutId: ID!, $lineItemIds: [ID!]!) {\n    checkoutLineItemsRemove(checkoutId: $checkoutId, lineItemIds: $lineItemIds) {\n      userErrors {\n        message\n        field\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n"]);return L=function(){return e},e}function M(){var e=Object(i.a)(["\n  mutation checkoutLineItemsUpdate ($checkoutId: ID!, $lineItems: [CheckoutLineItemUpdateInput!]!) {\n    checkoutLineItemsUpdate(checkoutId: $checkoutId, lineItems: $lineItems) {\n      userErrors {\n        message\n        field\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n"]);return M=function(){return e},e}function T(){var e=Object(i.a)(["\n  mutation checkoutLineItemsAdd ($checkoutId: ID!, $lineItems: [CheckoutLineItemInput!]!) {\n    checkoutLineItemsAdd(checkoutId: $checkoutId, lineItems: $lineItems) {\n      userErrors {\n        message\n        field\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n"]);return T=function(){return e},e}function S(){var e=Object(i.a)(["\n  mutation checkoutCreate ($input: CheckoutCreateInput!){\n    checkoutCreate(input: $input) {\n      userErrors {\n        message\n        field\n      }\n      checkout {\n        ...CheckoutFragment\n      }\n    }\n  }\n  ","\n"]);return S=function(){return e},e}function $(){var e=Object(i.a)(["\n  fragment CheckoutFragment on Checkout {\n    id\n    webUrl\n    totalTax\n    subtotalPrice\n    totalPrice\n    lineItems (first: 250) {\n      edges {\n        node {\n          id\n          title\n          variant {\n            id\n            title\n            image {\n              src\n            }\n            price\n          }\n          quantity\n        }\n      }\n    }\n  }\n"]);return $=function(){return e},e}var P=E()($()),V=E()(S(),P),F=E()(T(),P),Q=E()(M(),P),q=E()(L(),P),x=E()(w(),P);function R(e,t){var n=this;this.props.checkoutLineItemsAdd({variables:{checkoutId:this.state.checkout.id,lineItems:[{variantId:e,quantity:parseInt(t,10)}]}}).then((function(e){n.setState({checkout:e.data.checkoutLineItemsAdd.checkout})})),this.handleCartOpen()}function U(e,t){var n=this;this.props.checkoutLineItemsUpdate({variables:{checkoutId:this.state.checkout.id,lineItems:[{id:e,quantity:parseInt(t,10)}]}}).then((function(e){n.setState({checkout:e.data.checkoutLineItemsUpdate.checkout})}))}function D(e){var t=this;this.props.checkoutLineItemsRemove({variables:{checkoutId:this.state.checkout.id,lineItemIds:[e]}}).then((function(e){t.setState({checkout:e.data.checkoutLineItemsRemove.checkout})}))}function W(e){var t=this;this.props.checkoutCustomerAssociate({variables:{checkoutId:this.state.checkout.id,customerAccessToken:e}}).then((function(e){t.setState({checkout:e.data.checkoutCustomerAssociate.checkout,isCustomerAuthOpen:!1})}))}function z(){var e=Object(i.a)(["\n  query query {\n    shop {\n      name\n      description\n      products(first:20) {\n        pageInfo {\n          hasNextPage\n          hasPreviousPage\n        }\n        edges {\n          node {\n            id\n            title\n            options {\n              id\n              name\n              values\n            }\n            variants(first: 250) {\n              pageInfo {\n                hasNextPage\n                hasPreviousPage\n              }\n              edges {\n                node {\n                  id\n                  title\n                  selectedOptions {\n                    name\n                    value\n                  }\n                  image {\n                    src\n                  }\n                  price\n                }\n              }\n            }\n            images(first: 250) {\n              pageInfo {\n                hasNextPage\n                hasPreviousPage\n              }\n              edges {\n                node {\n                  src\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return z=function(){return e},e}var J=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={isCartOpen:!1,isCustomerAuthOpen:!1,isNewCustomer:!1,products:[],checkout:{lineItems:{edges:[]}}},e.handleCartClose=e.handleCartClose.bind(Object(l.a)(e)),e.handleCartOpen=e.handleCartOpen.bind(Object(l.a)(e)),e.openCustomerAuth=e.openCustomerAuth.bind(Object(l.a)(e)),e.closeCustomerAuth=e.closeCustomerAuth.bind(Object(l.a)(e)),e.addVariantToCart=R.bind(Object(l.a)(e)),e.updateLineItemInCart=U.bind(Object(l.a)(e)),e.removeLineItemInCart=D.bind(Object(l.a)(e)),e.showAccountVerificationMessage=e.showAccountVerificationMessage.bind(Object(l.a)(e)),e.associateCustomerCheckout=W.bind(Object(l.a)(e)),e}return Object(u.a)(n,[{key:"componentWillMount",value:function(){var e=this;this.props.createCheckout({variables:{input:{}}}).then((function(t){e.setState({checkout:t.data.checkoutCreate.checkout})}))}},{key:"handleCartOpen",value:function(){this.setState({isCartOpen:!0})}},{key:"handleCartClose",value:function(){this.setState({isCartOpen:!1})}},{key:"openCustomerAuth",value:function(e){"new-customer"===e.target.getAttribute("data-customer-type")?this.setState({isNewCustomer:!0,isCustomerAuthOpen:!0}):this.setState({isNewCustomer:!1,isCustomerAuthOpen:!0})}},{key:"showAccountVerificationMessage",value:function(){var e=this;this.setState({accountVerificationMessage:!0}),setTimeout((function(){e.setState({accountVerificationMessage:!1})}),5e3)}},{key:"closeCustomerAuth",value:function(){this.setState({isCustomerAuthOpen:!1})}},{key:"render",value:function(){var e=this;return this.props.data.loading?s.a.createElement("p",null,"Loading ..."):this.props.data.error?s.a.createElement("p",null,this.props.data.error.message):s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"Flash__message-wrapper"},s.a.createElement("p",{className:"Flash__message ".concat(this.state.accountVerificationMessage?"Flash__message--open":"")},"We have sent you an email, please click the link included to verify your email address")),s.a.createElement(N,{closeCustomerAuth:this.closeCustomerAuth,isCustomerAuthOpen:this.state.isCustomerAuthOpen,newCustomer:this.state.isNewCustomer,associateCustomerCheckout:this.associateCustomerCheckout,showAccountVerificationMessage:this.showAccountVerificationMessage}),s.a.createElement("header",{className:"App__header"},s.a.createElement("ul",{className:"App__nav"},s.a.createElement("li",{className:"button App__customer-actions",onClick:this.openCustomerAuth,"data-customer-type":"new-customer"},"Create an Account"),s.a.createElement("li",{className:"login App__customer-actions",onClick:this.openCustomerAuth},"Log in")),!this.state.isCartOpen&&s.a.createElement("div",{className:"App__view-cart-wrapper"},s.a.createElement("button",{className:"App__view-cart",onClick:function(){return e.setState({isCartOpen:!0})}},"Cart")),s.a.createElement("div",{className:"App__title"},s.a.createElement("h1",null,this.props.data.shop.name,": React Example"),s.a.createElement("h2",null,this.props.data.shop.description))),s.a.createElement("div",{className:"Product-wrapper"},this.props.data.shop.products.edges.map((function(t){return s.a.createElement(k,{addVariantToCart:e.addVariantToCart,checkout:e.state.checkout,key:t.node.id.toString(),product:t.node})}))),s.a.createElement(v,{removeLineItemInCart:this.removeLineItemInCart,updateLineItemInCart:this.updateLineItemInCart,checkout:this.state.checkout,isCartOpen:this.state.isCartOpen,handleCartClose:this.handleCartClose,customerAccessToken:this.state.customerAccessToken}))}}]),n}(a.Component),B=E()(z()),X=Object(g.flowRight)(Object(b.a)(B),Object(b.a)(V,{name:"createCheckout"}),Object(b.a)(F,{name:"checkoutLineItemsAdd"}),Object(b.a)(Q,{name:"checkoutLineItemsUpdate"}),Object(b.a)(q,{name:"checkoutLineItemsRemove"}),Object(b.a)(x,{name:"checkoutCustomerAssociate"}))(J),G=n(19),H=n(37),K=n(35),Y=n(36),Z=n(5),ee=(n(50),Object(H.a)({uri:"https://ikebanna.myshopify.com/api/graphql"})),te=Object(K.a)((function(){return{headers:{"X-Shopify-Storefront-Access-Token":"2ab194bb1908b09935b0629edb28f45b"}}})),ne=new G.a({link:te.concat(ee),cache:new Y.a});c.a.render(s.a.createElement(Z.b,{client:ne},s.a.createElement(X,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.9dd1bb87.chunk.js.map